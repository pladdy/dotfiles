#!/usr/bin/env bash

set -eu

WORKING_DIR=$(cd $(dirname $0) && pwd)

##
# assumes homebrew is installed by running install
##
brew install openssl python pipx

make poetry

for package in black rst2html5; do
  pipx uninstall $package
  pipx install $package
done

# rst2html must be a python2 lib/cli, alias it for atom.io package linter-rst
ln -sf /usr/local/bin/rst2html5 /usr/local/bin/rst2html

# used by atom.io
pip3 install pandoc

# atom io dep
python -m pip install 'python-language-server[all]'
